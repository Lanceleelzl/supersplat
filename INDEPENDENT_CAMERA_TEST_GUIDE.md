# 独立相机系统测试指南

## 功能概述

根据 `sence.txt` 文档的要求，我们已经实现了一个独立的相机系统，用于快照功能。该系统具有以下特点：

1. **独立性**: 快照相机不会影响主场景的编辑器相机
2. **参数控制**: 独立相机有自己的可见范围和内容控制
3. **内容共享**: 与主场景共享内容渲染
4. **参数绑定**: 相机参数（角度、焦距等）记录并绑定到巡检点位模型

## 测试步骤

### 1. 基础功能测试

#### 1.1 创建巡检点位
1. 打开应用程序 (http://localhost:3000)
2. 加载一个3D场景（PLY文件或其他模型）
3. 在菜单中选择"添加巡检点位"
4. 确认巡检点位模型（GLB）成功添加到场景中

#### 1.2 快照窗口显示
1. 点击巡检点位模型
2. 确认快照预览窗口自动弹出
3. 验证窗口标题显示正确的巡检点位名称
4. 确认窗口可以拖拽移动

### 2. 独立相机系统测试

#### 2.1 相机独立性验证
1. 打开快照窗口后，调整主场景的相机视角
2. **预期结果**: 快照窗口中的预览不应该跟随主相机变化
3. 在快照窗口中调整相机参数（FOV、近远裁剪面等）
4. **预期结果**: 主场景的相机视角不应该受到影响

#### 2.2 相机参数控制测试
在快照窗口中测试以下控制项：

**基础参数**:
- FOV (视野角度): 调整滑块，观察预览画面视野变化
- Near Clip (近裁剪面): 调整数值，验证近距离物体裁剪
- Far Clip (远裁剪面): 调整数值，验证远距离物体裁剪

**高级参数**:
- Aperture (光圈): 调整数值，观察景深效果
- Sensitivity (感光度): 调整数值，观察画面亮度
- Shutter (快门): 调整数值，观察曝光效果
- Tone Mapping (色调映射): 选择不同选项，观察色彩效果

### 3. 参数管理系统测试

#### 3.1 参数保存功能
1. 在快照窗口中调整各种相机参数
2. 点击"保存参数"按钮
3. 关闭快照窗口，重新点击同一巡检点位
4. **预期结果**: 快照窗口应该显示之前保存的参数设置

#### 3.2 复制主相机参数
1. 调整主场景相机到特定视角和参数
2. 打开快照窗口，点击"复制主相机"按钮
3. **预期结果**: 快照窗口的参数应该与主相机一致

#### 3.3 重置参数功能
1. 在快照窗口中修改各种参数
2. 点击"重置"按钮
3. **预期结果**: 所有参数应该恢复到默认值

### 4. 巡检点位绑定测试

#### 4.1 多个巡检点位测试
1. 创建多个巡检点位（至少3个）
2. 为每个巡检点位设置不同的相机参数
3. 依次点击不同的巡检点位
4. **预期结果**: 每个巡检点位应该显示其独有的相机参数

#### 4.2 参数持久化测试
1. 设置巡检点位的相机参数
2. 刷新页面或重新加载场景
3. 重新点击巡检点位
4. **预期结果**: 参数应该被正确保存和恢复

### 5. 渲染质量测试

#### 5.1 内容共享验证
1. 在主场景中添加或删除模型
2. 打开快照窗口
3. **预期结果**: 快照窗口应该显示与主场景相同的内容

#### 5.2 渲染性能测试
1. 同时打开快照窗口和主场景
2. 旋转主场景相机
3. **预期结果**: 两个视图应该流畅渲染，无明显卡顿

### 6. 错误处理测试

#### 6.1 无巡检点位状态
1. 在没有巡检点位的场景中
2. 尝试打开快照功能
3. **预期结果**: 应该有适当的提示或禁用状态

#### 6.2 参数边界测试
1. 尝试输入超出范围的参数值
2. **预期结果**: 应该有适当的限制和错误提示

## 预期结果总结

✅ **独立性**: 快照相机与主相机完全独立，互不影响
✅ **参数控制**: 所有相机参数都可以独立调整
✅ **内容共享**: 快照窗口显示与主场景相同的内容
✅ **参数绑定**: 相机参数正确绑定到巡检点位模型
✅ **持久化**: 参数设置能够保存和恢复
✅ **用户体验**: 界面友好，操作流畅

## 故障排除

如果遇到问题，请检查：

1. **控制台错误**: 打开浏览器开发者工具查看错误信息
2. **相机实体**: 确认独立相机实体正确创建
3. **事件系统**: 验证相机参数更新事件正常触发
4. **渲染目标**: 检查独立渲染目标是否正确设置

## 技术实现要点

- 使用 `createIndependentCamera()` 创建独立相机实体
- 通过 `enabled = false` 和 `priority = -1` 确保不影响主相机
- 使用独立的渲染目标进行画面渲染
- 通过事件系统实现参数的保存和同步
- 相机参数管理器提供统一的参数操作接口