<!DOCTYPE html>
<html>
    <head>
        <title>SuperSplat</title>
        <meta charset="utf-8" />
        <base href="__BASE_HREF__">
        <link rel="manifest" href="./manifest.json">
        <link rel="stylesheet" href="./index.css">
        <link rel="shortcut icon" href="#">
        <meta name="description" content="SuperSplat is an advanced browser-based editor for manipulating and optimizing 3D Gaussian Splats. It is open source and engine agnostic." />
        <meta name="viewport" content="width=device-width, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0" />

        <!-- jszip -->
        <script src="jszip.js"></script>

        <!-- Service worker -->
        <script>
            const sw = navigator.serviceWorker;
            // Only register service worker in production (when not served from localhost)
            const isProduction = !location.hostname.includes('localhost') && !location.hostname.includes('127.0.0.1');
            
            if (sw && isProduction) {
                sw.register('./sw.js')
                    .then(() => {})
                    .catch(() => {});
            } else {
                // Clear any existing service workers in development
                if (sw) {
                    sw.getRegistrations().then(registrations => {
                        registrations.forEach(registration => {
                            registration.unregister();
                        });
                    });
                }
            }
        </script>
    </head>

    <body>
        <script>
            // Force cache busting in development mode
            const isDev = location.hostname.includes('localhost') || location.hostname.includes('127.0.0.1');
            const timestamp = isDev ? '?v=' + Date.now() : '';
            const script = document.createElement('script');
            script.type = 'module';
            script.src = './index.js' + timestamp;
            document.head.appendChild(script);
        </script>
    </body>
</html>
